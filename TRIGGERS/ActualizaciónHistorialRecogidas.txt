CREATE OR REPLACE TRIGGER TRG_ACT_HISTORIAL_RECOGIDAS 
BEFORE DELETE ON RECOGEN
FOR EACH ROW 
DECLARE
BEGIN
  INSERT INTO HISTORIAL_RECOGIDAS values (:new.DNI_SOCIO,:new.ID_CESTA,:new.FECHA_RECOGIDA,sysdate, user);
  EXCEPTION
WHEN OTHERS THEN
RAISE_APPLICATION_ERROR(-10001, 'Error en la auditoria');
END TRG_ACT_HISTORIAL_RECOGIDAS;